<!DOCTYPE html>
<html>
<head>
  <title>Snakegame</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.js"></script>
  <script src="p5.js"></script>
  <script src="p5.sound.js"></script>
  <script src="sketch.js"></script>
  <link rel="stylesheet" href="style.css"/>

</head>
<body>
  <div id="container">
      <h1>Snakegame</h1>
      <br><br>
      <div id="canvasForHTML"></div>
  </div>
</body>
 

<script>

    var numberofsegment = 20;
    var segmentsize = 20;
    var snakeheadX =0;
    var snakeheadY =0;
    var velocityX =0;
    var velocityY =0;
    var fruitX =0;
    var fruitY =0;
    var taillength = 3;
    var tailarray = [];
    var score = 0;
    var highscore = 0;
    var count = 5;
    var bigfruitX = 0;
    var bigfruitY = 0;
    

    function setup() {
        
      var canvas = createCanvas(400, 400);
      frameRate(10);
      canvas.parent('canvasForHTML');
      
      snakeheadX = numberofsegment/2;
      snakeheadY = numberofsegment/2;

      fruitX = floor(random(0,segmentsize))
      fruitY = floor(random(0,segmentsize))

      
    }

    function draw() {
      background(0);

      
  if(velocityX != 0 || velocityY !=0)
    {  
     while(tailarray.length > taillength)
      {
        tailarray.shift();
      }

      tailarray.push({x:snakeheadX,y:snakeheadY})

      for (let i= 0; i<tailarray.length;i++)
      {
        rect(tailarray[i].x*segmentsize,tailarray[i].y*segmentsize,segmentsize,segmentsize)
      }


      if(snakeheadX == fruitX && snakeheadY == fruitY)
      {
        fruitX = floor(random(0,segmentsize))
        fruitY = floor(random(0,segmentsize))
        taillength++
        score++
         
         
      }

      for(i=0;i<tailarray.length;i++)
     {
       if(snakeheadX+velocityX == tailarray[i].x && snakeheadY+velocityY == tailarray[i].y)
         
         {
           snakeheadX = numberofsegment/2;
           snakeheadY = numberofsegment/2;
           
           velocityX =0;
           velocityY =0;
           
           taillength =3;
           tailarray =[];
           
           fruitX= floor(random(0,numberofsegment))
           fruitY= floor(random(0,numberofsegment))

           if(score > highscore)
           {
            highscore = score;
           }
           score =0;
           
         }
     }
    }
      snakeheadX = snakeheadX+velocityX;
      snakeheadY = snakeheadY+velocityY;
      withinboundry()
      
     fill(255,0,0)
     rect(fruitX*segmentsize,fruitY*segmentsize,segmentsize,segmentsize)
      
     fill(255,0,0)
     rect(bigfruitX*segmentsize,bigfruitY*segmentsize,30,30)

     fill(0,0,255)
     rect(snakeheadX*segmentsize,snakeheadY*segmentsize,segmentsize,segmentsize)

     textSize(10);
    text('score:'+ score,10,10)
    textSize(10);
    text('highscore:'+ highscore,10,20)

    }
    function keyPressed()
    {
        if(keyCode == UP_ARROW )
        {
            velocityX = 0;
            velocityY = -1;
        }
        if(keyCode == DOWN_ARROW)
        {
            velocityX = 0;
            velocityY = 1;
        }
        if(keyCode == LEFT_ARROW)
        {
            velocityX = -1;
            velocityY = 0;
        }
        if(keyCode == RIGHT_ARROW)
        {
            velocityX = 1;
            velocityY =0;
        }
    }
    function withinboundry()
    {
      if(snakeheadX < 0)
        {
      snakeheadX = numberofsegment - 1
        }
     if(snakeheadX > numberofsegment-1)
       {
      snakeheadX = 0
       }
     if(snakeheadY < 0)
      {
      snakeheadY = numberofsegment - 1
      }
     if(snakeheadY > numberofsegment-1)
      {
      snakeheadY = 0
      }
    }
  </script>
</html>